trigger:
- master

pool:
  name: LocalPool

steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '7.0.x'

- script: dotnet restore
  displayName: 'Restaurar dependencias'

- script: dotnet build --configuration Release
  displayName: 'Compilar proyecto'

- script: dotnet test DemoTests/DemoTests.csproj --logger:"trx;LogFileName=test_results.trx"
  displayName: 'Ejecutar pruebas y generar archivo trx'

- task: PublishTestResults@2
  inputs:
    testResultsFiles: '**/*.trx'
    testRunTitle: 'Resultados de pruebas'
  condition: succeededOrFailed()
